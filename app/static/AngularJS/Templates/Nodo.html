<div cg-busy="myPromise" ng-init="init()" resize>
  <div id="contenedor">
    <section id="header">
      <div class="col-xs-9" id="folio">
        {{ 'Orden de Compra: ' + expediente.folio }}
      </div>
      <div class="col-xs-3 estatus" id="estatus">
        {{ expediente.estatusExpediente }}
      </div>
    </section>
    <section id="depends" tooltip="Orden padre" ng-click="VerOrdenPadre(expediente)" ng-hide=" expediente.folioPadre == '' ">  
     <span class="glyphicon glyphicon-backward" aria-hidden="true"></span> {{ expediente.folioPadre }}
   </section>
   <section id="extends" tooltip="Orden hijo" ng-click="VerOrdenHijo(expediente)" ng-hide=" expediente.folioHijo == null ">  
     <span class="glyphicon glyphicon-forward" aria-hidden="true"></span> {{ expediente.folioHijo }}
   </section>
   <section id="details">
    <div id="row data"> 
      <div class="etiqueta">
        Solicitante
      </div>
      <div class="texto">
       {{ expediente.nombreUsuario }}
     </div>
     <div class="etiqueta">
      Empresa
    </div>
    <div class="texto">
     {{ expediente.empresa }}
   </div>
   <div class="etiqueta">
    Agencia
  </div>
  <div class="texto">
   {{ expediente.agencia }}
 </div>
 <div class="etiqueta">
  Departamento
</div>
<div class="texto">
 {{ expediente.departamento }}
</div>
<!--  <hr> -->
<div class="etiqueta">
  Ult. Modificación
</div>
<div class="texto">
 {{ expediente.fechaUltimoMovimiento }}
</div>
</div>
</section>
<section id="navigator">
  <ul id="standard">
    <li ng-repeat="nodo in listaNodos">
      <img src="{{ 'image/icons/' + nodo.imagen }}" class="logotipo"/>
      <h4 class="nombre" tooltip="{{ nodo.descripcion }}"> {{ nodo.nombre }}</h4>
      <h5 class="descripcion"> {{ }}</h4>
        <div class="alerta" ng-hide="{{ nodo.alertas == 0 }}">
          {{ nodo.alertas }}
        </div>
        <div class="numero">
          {{ nodo.id }}
        </div>
        <div class="cerradoLabel" ng-class="{ 'oculto': nodo.estatus == 2, 'cerradoCompletado': nodo.estatus == 3, 'cerradoPendiente': nodo.estatus == 1}">
          {{ ( nodo.estatus == 3 ? 'Completado' : 'Pendiente' ) }}
        </div>
        <div class="desdeLabel" tooltip="Inicio" ng-hide=" nodo.fechaInicio == null ">
         <div class="glyphicon glyphicon-time desdeTexto" aria-hidden="true"></div><div class="desdeTexto">{{ nodo.fechaInicio | date:'MM/dd/yy @ h:mma'}}</div> 
       </div>
       <div class="hastaLabel" tooltip="Término" ng-hide=" nodo.fechaFin == null ">
        <div class="glyphicon glyphicon-time desdeTexto" aria-hidden="true"></div><div class="desdeTexto">{{ nodo.fechaFin | date:'MM/dd/yy @ h:mma' }}</div>
      </div>
    </li>
  </ul>
</section>
<section class="control">
  <div id="navigateControl">
    <nav id="navigate">
      <ul class="pagination">
        <li><a class="prev anavigatorNode" tooltip="Nodo Anterior"><span aria-hidden="true">«</span></a></li>
        <li ng-repeat="nodo in listaNodos" ng-class="{ 'active': nodo.active == 1, 'disabled': nodo.enabled == 0 }"><a ng-click="setPage(nodo)" tooltip="{{ nodo.nombre + ( nodo.enabled == 0 ? ' (No disponible para su perfil)' : '') }}" ng-class="{ 'cerrado': nodo.estatus != 1 && nodo.active != 1, 'nodoDisabled': nodo.enabled == 0 }" class="anavigatorNode">{{ nodo.id }}</a></li>
        <li><a class="next anavigatorNode" tooltip="Siguiente Nodo"><span aria-hidden="true">»</span></a></li>
      </ul>
    </nav>
  </div>
  <hr />
</section>
<section id="loader" ng-show="isLoading">
  <div class="loading">
    <div class="windows8">
      <div class="wBall" id="wBall_1">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_2">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_3">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_4">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_5">
        <div class="wInnerBall"></div>
      </div>
    </div>
  </div>
</section>

<section id="detail" ng-show="!isLoading" ng-hide="currentNode.estatus == 1">
  <div class="row linea">
    <div class="col-sm-6">
      <h4>Contenido del NODO {{ currentNode.id }} <span class="label label-default">{{ listaDocumentos.length }}</span></h4>
      <div class="list-group" id="viewerDocs" ng-controller="documentoController">
        <div class="list-group-item" ng-repeat="documento in listaDocumentos" ng-class="{ 'disabled':  documento.consultar == 0 }" tooltip="{{( documento.consultar == 0 ? 'No disponible para su perfil' : '' )}}">
          <strong> {{ documento.nombreDocumento }}</strong> {{ documento.descripcion }}
          <div class="botoneraDocumento" ng-hide="documento.cargar != 0 || documento.consultar == 0">
            <button type="button" class="btn btn-primary btn-xs" tooltip="{{ documento.consultar == 1 ? 'Ver documento' : 'No puede realizar está acción' }}" ng-class="{ 'disabled': documento.consultar != 1 }" ng-click="VerDocumento(documento)">
              <span class="glyphicon glyphicon-file" aria-hidden="true"></span> 
            </button>
            <a type="button" class="btn btn-info btn-xs" tooltip="Descargar" href="{{ documento.Ruta }}" ng-class="{ 'disabled': documento.descargar != 1 }" download>
              <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> 
            </a>
            <button type="button" class="btn btn-success btn-xs" tooltip="Enviar" ng-click="ShowEnviar(documento)" ng-class="{ 'disabled': documento.enviarEmail != 1 }">
              <span class="glyphicon glyphicon-send" aria-hidden="true"></span>  
            </button>
          </div>
          <div class="botoneraDocumento" ng-hide="documento.cargar == 0 || documento.consultar == 0">
            <button type="button" class="btn btn-warning btn-xs" tooltip="Cargar documento" ng-click="ShowCargar(documento)">
              <span class="glyphicon glyphicon-circle-arrow-up" aria-hidden="true"></span>  
            </button>
          </div> 
        </div>
      </div>
    </div>
    <div class="col-sm-6">
      <h4>Alertas <span class="label label-default">{{ listaAlertas.length }}</span></h4>
      <div class="alert alert-warning alert-dismissible" role="alert"  ng-repeat="alerta in listaAlertas">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <strong>{{ alerta.nombre + '!  '}}</strong> {{ alerta.descripcion }}
      </div>
    </div>
  </div>
  <br>
  <br>
</section>
</div>
</div>

<script type="text/javascript">
function nodisponible() {
 var scope = angular.element($("#viewerDocs")).scope();
 scope.$apply(function(){
  scope.NoDisponible();
})
}
</script>


