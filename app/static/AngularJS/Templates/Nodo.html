<div cg-busy="myPromise" ng-init="init()" resize>
  <div id="contenedor">

    <section id="header">
      <div class="col-xs-9" id="folio">
        {{ 'Serie: ' + unidadHeader.vin }}
      </div>
      <div class="col-xs-3 estatus" id="estatus">
        {{ unidadHeader.estatus }}
      </div>
    </section>
    <section id="depends" tooltip="Orden padre" ng-click="VerOrdenPadre(expediente)" ng-hide=" expediente.folioPadre == '' ">  
     <span class="glyphicon glyphicon-backward" aria-hidden="true"></span> {{ expediente.folioPadre }}
   </section>
   <section id="extends" tooltip="Orden hijo" ng-click="VerOrdenHijo(expediente)" ng-hide=" expediente.folioHijo == null ">  
     <span class="glyphicon glyphicon-forward" aria-hidden="true"></span> {{ expediente.folioHijo }}
   </section>
   <section id="details">
    <div id="row data"> 
      <div class="etiqueta">
        Factura
      </div>
      <div class="texto">
       {{ unidadHeader.factura }}
      </div>
      <div class="etiqueta">
      Tipo
     </div>
    <div class="texto">
     {{ unidadHeader.tipo }}
   </div>
   <div class="etiqueta">
    Marca
  </div>
  <div class="texto">
   {{ unidadHeader.marca }}
 </div>
 <div class="etiqueta">
  Modelo
</div>
<div class="texto">
 {{ unidadHeader.modelo }}
</div>
<div class="etiqueta">
  Motor
</div>
<div class="texto">
 {{ unidadHeader.motor }}
</div>
<div class="etiqueta">
  Color
</div>
<div class="texto">
 {{ unidadHeader.color }}
</div>
<!--  <hr> -->
<div class="etiqueta">
  Ult. Modificación
</div>
<div class="texto">
 {{ unidadHeader.ultimaModificacion }}
</div>
</div>
</section>
<section id="navigator">
  <ul id="standard">
    <li ng-repeat="nodo in listaNodos">
      <img src=" {{ 'image/icons/' + nodo.imagenFase }} " class="logotipo"/>
      <h4 class="nombre" tooltip="{{ nodo.descripcionFase }}"> {{ nodo.nombreFase }}</h4>
        <div class="alerta" ng-hide="{{ nodo.alertas == 0 }}">
          {{ nodo.alertas }}
        </div>
        <div class="numero">
          {{ nodo.idFase }}
        </div>
        <div class="cerradoLabel" ng-class="{ 'oculto': nodo.estatus == 2, 'cerradoCompletado': nodo.estatus == 3, 'cerradoPendiente': nodo.estatus == 1}">
          {{ ( nodo.estatus == 3 ? 'Completado' : 'Pendiente' ) }}
        </div>
<!--         <div class="desdeLabel" tooltip="Inicio" ng-hide=" nodo.fechaInicio == null ">
         <div class="glyphicon glyphicon-time desdeTexto" aria-hidden="true"></div><div class="desdeTexto">{{ nodo.fechaInicio | date:'MM/dd/yy @ h:mma'}}</div> 
       </div>
       <div class="hastaLabel" tooltip="Término" ng-hide=" nodo.fechaFin == null ">
        <div class="glyphicon glyphicon-time desdeTexto" aria-hidden="true"></div><div class="desdeTexto">{{ nodo.fechaFin | date:'MM/dd/yy @ h:mma' }}</div>
      </div> -->
    </li>
  </ul>
</section>
<section class="control">
  <div id="navigateControl">
    <nav id="navigate">
      <ul class="pagination">
        <li><a class="prev anavigatorNode" tooltip="Nodo Anterior"><span aria-hidden="true">«</span></a></li>
        <li ng-repeat="nodo in listaNodos" ng-class="{ 'active': nodo.activo == 1 }"><a ng-click="setPage(nodo)" tooltip="{{ nodo.nombreFase }}" ng-class="{ 'cerrado': nodo.estatus != 1 && nodo.activo != 1 }" class="anavigatorNode">{{ nodo.idFase }}</a></li>
        <li><a class="next anavigatorNode" tooltip="Siguiente Nodo"><span aria-hidden="true">»</span></a></li>
      </ul>
    </nav>
  </div>
  <hr />
</section>
<section id="loader" ng-show="isLoading">
  <div class="loading">
    <div class="windows8">
      <div class="wBall" id="wBall_1">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_2">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_3">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_4">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_5">
        <div class="wInnerBall"></div>
      </div>
    </div>
  </div>
</section>

<section id="detail" ng-show="!isLoading" ng-hide="currentNode.estatus == 1">
  <div id="infoGral" class="container-fluid"  
ng-show="currentNode.idFase==1" ng-hide="currentNode.idFase!=1">
       <h4 align="center">Información General</h4>
       <hr>
       <form class="form-horizontal">
           <div class="form-group">
               <label for="numEconomico1" class="control-label col-sm-1">Num. Económico 1: </label>
               <div class="col-md-2">
                <input type="text" id="txtnumEconomico1" class="form-control">
               </div>
               <label for="numEconomico2" class="control-label col-sm-1">Num. Económico 2: </label>
               <div class="col-md-2">
                <input type="text" id="txtnumEconomico2" class="form-control">
               </div>
               <label for="vin" class="control-label col-sm-1">VIN
Vehicular: </label>
               <div class="col-md-2">
                <input type="text" id="txtVIN" class="form-control">
               </div>
               <label for="marca" class="control-label
col-sm-1">Marca: </label>
               <div class="col-md-2">
                <input type="text" id="txtMarca" class="form-control">
               </div></br>
           </div>
             <label for="modelo" class="control-label
col-sm-1">Modelo: </label>
             <div class="col-md-2">
              <input type="text" id="txtModelo" class="form-control">
             </div>
             <label for="accesorios" class="control-label
col-sm-1">Accesorios: </label>
             <div class="col-md-2">
              <input type="text" id="txtAccesorios" class="form-control">
             </div>
             <label for="tipo" class="control-label col-sm-1">Tipo: </label>
             <div class="col-md-2">
              <input type="text" id="txtTipo" class="form-control">
             </div>
             <label for="dirEntrega" class="control-label col-sm-1">Dirección de Entrega: </label>
             <div class="col-md-2">
              <input type="text" id="txtDirEntrega" class="form-control">
             </div>
           <div>
           </div>
       </form>
   </div>

   <div id="doc" class="container-fluid"  
ng-show="currentNode.idFase==2" ng-hide="currentNode.idFase!=2">
     <h4 align="center">Documentación</h4>
     <hr>
       <form class="form-horizontal">
           <div class="form-group">
               <label for="factura" class="control-label
col-sm-1">Factura: </label>
               <div class="col-md-4">
                <input type="file" id="txtFactura" class="form-control">
               </div>
               <label for="poliza" class="control-label col-sm-1">Póliza de Seguros: </label>
               <div class="col-md-4">
                <input type="file" id="txtPoliza" class="form-control">
               </div>

           </div>
           <div class="form-group">
               <label for="placas" class="control-label
col-sm-1">Placas: </label>
               <div class="col-md-4">
                <input type="file" id="txtPlacas" class="form-control">
               </div>
               <label for="placas" class="control-label col-sm-1">Permiso Especial: </label>
               <div class="col-md-4">
                <input type="file" id="txtPlacas" class="form-control">
               </div>
           </div>
           <div class="form-group">
               <label for="placas" class="control-label col-sm-1">Fecha Técnica: </label>
               <div class="col-md-4">
                <input type="file" id="txtPlacas" class="form-control">
               </div>
               <label for="placas" class="control-label col-sm-1">Manual de usuario: </label>
               <div class="col-md-4">
                <input type="file" id="txtPlacas" class="form-control">
               </div>
           </div>
           <div class="form-group">
               <label for="placas" class="control-label col-sm-1">Pista Teórica: </label>
               <div class="col-md-4">
                <input type="file" id="txtPlacas" class="form-control">
               </div>
           </div>
       </form>
   </div>

   <div is="entrega" class="container-fluid"  
ng-show="currentNode.idFase==3" ng-hide="currentNode.idFase!=3">
     <h4 align="center">Entrega</h4>
     <hr>
     <form class="form-horizontal">
         <div class="form-group">
             <label for="fecha" class="control-label col-sm-1">Fecha: </label>
             <div class="col-md-2">
              <input typFecha" class="form-control">
             </div>e="date" id="txt
             <label for="recibido" class="control-label col-sm-2">Recibido por: </label>
             <div class="col-md-2">
              <input type="text" id="txtRecibido" class="form-control">
             </div>
              <div class="col-md-2">
               <label class="checkbox-inline"><input type="checkbox"  
value="">Acuse</label>
              </div>
             </br>
         </div>
         <div class="col-md-2">
            <label for="fotoFrente" class="control-label col-sm-1">Fotografia Frente: </label>
         </div>
         <div class="col-md-2">
            <label for="fotoCostado1" class="control-label col-sm-1">Fotografias Costado 1: </label>
         </div>
         <div class="col-md-2">
            <label for="fotoCostado2" class="control-label col-sm-1">Fotografia Costado 2: </label>
         </div>
         <div class="col-md-2">
            <label for="fotoTrasera" class="control-label col-sm-1">Fotografia Trasera: </label>
         </div>
       </div>
     </form>
   </div>
  <div class="row linea">
    <div class="col-sm-6">
      <h4>Contenido del NODO {{ currentNode.idFase }} <span class="label label-default">{{ listaDocumentos.length }}</span></h4>
      <div class="list-group" id="viewerDos" >
        <div class="list-group-item" ng-repeat="documento in listaDocumentos" ng-class="{ 'disabled':  documento.consultar == 0 }" tooltip="{{( documento.consultar == 0 ? 'No disponible para su perfil' : '' )}}">
          <strong> {{ documento.nombreDocumento }}</strong> {{ documento.descripcion }}
          <div class="botoneraDocumento" ng-hide="documento.cargar != 0 || documento.consultar == 0">
            <button type="button" class="btn btn-primary btn-xs" tooltip="{{ documento.consultar == 1 ? 'Ver documento' : 'No puede realizar está acción' }}" ng-class="{ 'disabled': documento.consultar != 1 }" ng-click="VerDocumento(documento)">
              <span class="glyphicon glyphicon-file" aria-hidden="true"></span> 
            </button>
            <a type="button" class="btn btn-info btn-xs" tooltip="Descargar" href="{{ documento.Ruta }}" ng-class="{ 'disabled': documento.descargar != 1 }" download>
              <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> 
            </a>
            <button type="button" class="btn btn-success btn-xs" tooltip="Enviar" ng-click="ShowEnviar(documento)" ng-class="{ 'disabled': documento.enviarEmail != 1 }">
              <span class="glyphicon glyphicon-send" aria-hidden="true"></span>  
            </button>
          </div>
          <div class="botoneraDocumento" ng-hide="documento.cargar == 0 || documento.consultar == 0">
            <button type="button" class="btn btn-warning btn-xs" tooltip="Cargar documento" ng-click="ShowCargar(documento)">
              <span class="glyphicon glyphicon-circle-arrow-up" aria-hidden="true"></span>  
            </button>
          </div> 
        </div>
      </div>
    </div>
    <div class="col-sm-6">
      <h4>Alertas <span class="label label-default">{{ listaAlertas.length }}</span></h4>
      <div class="alert alert-warning alert-dismissible" role="alert"  ng-repeat="alerta in listaAlertas">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <strong>{{ alerta.nombre + '!  '}}</strong> {{ alerta.descripcion }}
      </div>
    </div>
  </div>
  <br>
  <br>
</section>

<script type="text/javascript">
function nodisponible() {
 var scope = angular.element($("#viewerDocs")).scope();
 scope.$apply(function(){
  scope.NoDisponible();
})
}
</script>


