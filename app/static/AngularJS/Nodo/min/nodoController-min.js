registrationModule.controller("nodoController",function(e,o,n,r,t,a,i,c){e.isLoading=!1,e.idProceso=1,e.perfil=1;var u=function(e,o,n,t){$("#btnEnviar").button("reset"),r.error("Ocurrio un problema")};e.init=function(){c.get(getParameterByName("employee")).success(d).error(u)};var d=function(e,n,a,i){o.empleado=e,null!=o.empleado?getParameterByName("id")&&t.getHeader(getParameterByName("id"),o.empleado.idUsuario).success(l).error(u):r.error("El empleado no existe en el sistema.")},l=function(n,a,i,c){e.expediente=n,null!=e.expediente?t.getAll(getParameterByName("id"),e.idProceso,o.empleado.idPerfil).success(s).error(u):r.error("No existe información para este expediente.")};e.VerOrdenPadre=function(e){location.href="/?id="+e.folioPadre+"&employee=1"},e.VerOrdenHijo=function(e){location.href="/?id="+e.folioHijo+"&employee=1"};var s=function(o,n,r,t){e.listaNodos=o,e.numElements=o.length,f(),setTimeout(function(){$("ul#standard").roundabout({btnNext:".next",btnNextCallback:function(){p(".next")},btnPrev:".prev",btnPrevCallback:function(){p(".prev")},clickToFocusCallback:function(){p(".next")}}),g(e.currentPage)},1)},f=function(){e.currentPage=e.expediente.nodoActual},p=function(o){e.currentPage=$("ul#standard").roundabout("getChildInFocus")+1,0!=e.listaNodos[e.currentPage-1].enabled?g(e.currentPage):(r.warning("El nodo "+e.currentPage+" no está disponible para su perfil."),$(o).click())};e.setPage=function(o){0!=o.enabled?(e.currentPage=o.id,g(e.currentPage)):r.warning("Nodo "+e.currentPage+" no disponible para su perfil.")};var g=function(o){$("ul#standard").roundabout("animateToChild",o-1),e.currentNode=e.listaNodos[o-1],m(),b()},m=function(){angular.forEach(e.listaNodos,function(o,n){n==e.currentPage-1?o.active=1:o.active=0}),x()},P=function(o,n,r,t){e.isLoading=!1,e.listaAlertas=o,x()},N=function(o,n,r,t){e.listaDocumentos=o,i.getByNodo(e.idProceso,e.currentNode.id,e.currentNode.folio).success(P).error(u)},b=function(){1!=e.currentNode.estatus?(e.isLoading=!0,x(),a.getByNodo(e.currentNode.id,e.currentNode.folio,e.perfil).success(N).error(u)):r.warning("El nodo "+e.currentNode.id+" aún no se activa para el expediente actual. No existen documentos para mostrar.")},x=function(){"$apply"!=e.$root.$$phase&&"$digest"!=e.$root.$$phase&&e.$apply()}});