registrationModule.controller("nodoController",function(e,o,n,r,a,i){e.isLoading=!1,e.idProceso=1,e.perfil=1,e.idUsuario=20,e.idFase=1;var t=function(e,o,n,a){$("#btnEnviar").button("reset"),r.error("Ocurrio un problema")};e.init=function(){e.empleado=n.get("employeeLogged"),e.unidad=n.get("currentVIN"),i.getHeader(e.unidad.vin).success(u).error(t)};var u=function(o,n,i,u){e.unidadHeader=o,e.currentPage=e.unidadHeader.faseActual,r.info("Header cargado."),a.getFasePermiso(e.empleado.idUsuario).success(s).error(t)};e.mostrarNodos=function(o){a.getFasePermiso(e.idUsuario).success(s).error(t)},e.VerOrdenPadre=function(e){location.href="/?id="+e.folioPadre+"&employee=1"},e.VerOrdenHijo=function(e){location.href="/?id="+e.folioHijo+"&employee=1"};var s=function(o,n,r,a){e.listaNodos=o,e.numElements=o.length,setTimeout(function(){$("ul#standard").roundabout({btnNext:".next",btnNextCallback:function(){c(".next")},btnPrev:".prev",btnPrevCallback:function(){c(".prev")},clickToFocusCallback:function(){c(".next")}}),d(e.currentPage)},1)},c=function(o){e.currentPage=$("ul#standard").roundabout("getChildInFocus")+1,0!=e.listaNodos[e.currentPage-1].enabled?d(e.currentPage):(r.warning("El nodo "+e.currentPage+" no est√° disponible para su perfil."),$(o).click())};e.setPage=function(o){0!=o.enabled?(e.currentPage=o.id,d(e.currentPage)):r.warning("Nodo "+e.currentPage+" no disponible para su perfil.")};var d=function(o){$("ul#standard").roundabout("animateToChild",o-1),e.currentNode=e.listaNodos[o-1],l(),p()},l=function(){angular.forEach(e.listaNodos,function(o,n){n==e.currentPage-1?o.active=1:o.active=0}),P()},f=function(o,n,r,a){e.isLoading=!1,e.listaAlertas=o,P()},g=function(o,n,r,i){e.listaDocumentos=o,a.getDocFasePermiso(e.idUsuario,e.idFase).success(f).error(t)},p=function(){e.isLoading=!0,P(),a.getDocFasePermiso(e.idUsuario,e.idFase).success(g).error(t)},P=function(){"$apply"!=e.$root.$$phase&&"$digest"!=e.$root.$$phase&&e.$apply()}});